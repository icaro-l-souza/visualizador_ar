<!DOCTYPE html>
<html>

<head>
    <title>Visualizador de AR Dinâmico</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
</head>

<body style="margin: 0; overflow: hidden;">
    <a-scene embedded arjs>
        <a-marker preset="hiro">
            <a-entity id="modelo-ativo" gltf-model="" scale="0.5 0.5 0.5" position="0 0.5 0"
                rotation="-90 0 0"></a-entity>
        </a-marker>
        <a-entity camera></a-entity>
    </a-scene>

    <script>
        window.onload = () => {
            const urlParams = new URLSearchParams(window.location.search);
            const nomeArquivoModelo = urlParams.get('modelo');

            if (nomeArquivoModelo) {
                const modelo = document.querySelector('#modelo-ativo');

                // --- AQUI ESTÁ A CORREÇÃO ---
                // O caminho agora é relativo. A partir de /FrontEnd/View/,
                // o '../../' sobe duas pastas (para a raiz do projeto)
                // e depois desce para a pasta /Uploads/.
                const urlModelo = `../../Uploads/${nomeArquivoModelo}`;

                modelo.setAttribute('gltf-model', urlModelo);

            } else {
                console.error("Nenhum modelo especificado no URL. Use ?modelo=seu_arquivo.glb");
            }
        };
    </script>
</body>

</html>
